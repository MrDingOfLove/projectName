<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ding.ssm.mapper.ItemsCustomMapper">
    <!--商品查询sql片段 查询条件-->
    <!--名字模糊查询-->
    <sql id="query_items_where">
        <if test="itemsCustom!=null">
            <if test="itemsCustom.name!=null and itemsCustom.name!=''">
                items.name like '%${itemsCustom.name}%'
            </if>
        </if>
    </sql>
    <!--商品列表查询-->
    <select id="selectItemsList" parameterType="ItemsQueryVo" resultType="ItemsCustom">
        select * from items
        <where>
            <include refid="query_items_where"/>
        </where>
    </select>
    <sql id="baseInfo">
      id, name, price, pic, createtime
    </sql>
    <sql id="detailInfo">
      detail
    </sql>
    <!--根据id查询商品信息-->
    <select id="selectItemById" parameterType="int" resultType="ItemsCustom">
        select
        <include refid="baseInfo" />
        ,
        <include refid="detailInfo" />
        from items
        where id = #{id}
    </select>
    <!--根据id更新商品信息-->
    <update id="updateItemById" parameterType="ItemsCustom">
        update items
        set
          name = #{name},
          price = #{price},
          detail=#{detail},
          pic = #{pic},
          createtime = #{createtime}
        where id = #{id}
    </update>
</mapper>